{"cells":[{"cell_type":"code","source":["## Load Folder Drive\n","import os, sys\n","from google.colab import drive\n","drive.mount('/content/drive/')\n","\n","## Move Pointer File ke DATA_UM\n","%cd /content/drive/MyDrive/DATA_UM\n","\n","## Declare Root Project File\n","root_file = \"/content/drive/MyDrive/DATA_UM\""],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"sayuemFvhhhq","executionInfo":{"status":"ok","timestamp":1708566739352,"user_tz":-420,"elapsed":19665,"user":{"displayName":"Synithis","userId":"03957030646426939799"}},"outputId":"167521ed-7886-4865-dba8-23344600fd16"},"execution_count":2,"outputs":[{"output_type":"stream","name":"stdout","text":["Mounted at /content/drive/\n","/content/drive/MyDrive/DATA_UM\n"]}]},{"cell_type":"code","execution_count":3,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":110781,"status":"ok","timestamp":1708566850123,"user":{"displayName":"Synithis","userId":"03957030646426939799"},"user_tz":-420},"id":"X4mmwDtW-lgv","outputId":"5b4a34db-731f-4c76-aab1-94e9444fb46c"},"outputs":[{"output_type":"stream","name":"stdout","text":["Collecting ntscraper\n","  Downloading ntscraper-0.3.12-py3-none-any.whl (11 kB)\n","Requirement already satisfied: requests in /usr/local/lib/python3.10/dist-packages (from ntscraper) (2.31.0)\n","Requirement already satisfied: beautifulsoup4 in /usr/local/lib/python3.10/dist-packages (from ntscraper) (4.12.3)\n","Requirement already satisfied: lxml in /usr/local/lib/python3.10/dist-packages (from ntscraper) (4.9.4)\n","Requirement already satisfied: soupsieve>1.2 in /usr/local/lib/python3.10/dist-packages (from beautifulsoup4->ntscraper) (2.5)\n","Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests->ntscraper) (3.3.2)\n","Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/dist-packages (from requests->ntscraper) (3.6)\n","Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.10/dist-packages (from requests->ntscraper) (2.0.7)\n","Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests->ntscraper) (2024.2.2)\n","Installing collected packages: ntscraper\n","Successfully installed ntscraper-0.3.12\n"]},{"output_type":"stream","name":"stderr","text":["Testing instances: 100%|██████████| 77/77 [01:40<00:00,  1.30s/it]\n","INFO:numexpr.utils:NumExpr defaulting to 2 threads.\n"]}],"source":["!pip install ntscraper\n","\n","from ntscraper import Nitter\n","scraper = Nitter(log_level=1)\n","\n","import pandas as pd\n","from pandas import json_normalize\n","\n","import os.path\n","from os import path"]},{"cell_type":"code","source":["# Declare Product\n","brands = ['ultramilk']\n","# brands = ['cimory', 'frisian_flag', 'fruittea', 'greenfield', 'indomilk', 'milklife', 'sosro', 'teh_pucuk', 'ultramilk']\n","#brands = []\n","\n","# Declare Hashtag for Scraping\n","hashtags = {\n","  \"ultramilk\"   : [\"ultramilkxstraykids\"]\n","}\n","\n","# hashtags = {\n","#   \"cimory\"      : [\"cimoryuhtmilk\", \"ngemilnoworrycumacimory\"],\n","#   \"frisian_flag\": [],\n","#   \"fruittea\"    : [\"TehHaEr\"],\n","#   \"greenfield\"  : [\"beraniextra\"],\n","#   \"ultramilk\"   : [\"iamULTRAoddinary\", \"MakeYourMove\", \"DontStopYourMove\", \"TheUnstoppableGeneration\", \"ITZYPhotocardAwards\", \"ultramilkxitzy\", \"ultramilkxstraykids\"],\n","#   \"indomilk\"    : [\"IndomilkxBLACKPINK\", \"IndomilkInYourArea\", \"IndomilkGoesToKorea\", \"IndomilkxASTRO\", \"IndomilkxAllobank\"],\n","#   \"milklife\"    : [\"segerakanlahmilklifekurma\"],\n","#   \"sosro\"       : [\"sebotolkebaikan\", \"SebotolKaryaAnakBangsa\"],\n","#   \"teh_pucuk\"   : [\"TehPucukHarumxJeromePolin\", \"kesegaranuntuksemua\", \"tehpucukharumsocceredition\", \"ditemenintehpucukharum\"]\n","# }\n","\n","# # Hashtag Lama.\n","# hashtags = {\n","#   \"cimory\"      : [\"cimorybts\", \"cimoryyogurt\"],\n","#   \"frisian_flag\": [\"frisianflagindonesia\", \"frisianflagmilky\", \"kekuatanuntukmenang\", \"sarapangenerasisatset\"],\n","#   \"fruittea\"    : [\"fruiteaworldfestival\", \"fruitteasosro\", \"ftwf2023\", \"ngeblendsensasinya\"],\n","#   \"greenfield\"  : [\"arirangxgreenfieldsmagiccreation\", \"extrafresh\", \"extramaugerak\", \"extranagih\", \"extratasty\", \"greenfieldsextra\", \"startfresh\"],\n","#   \"ultramilk\"   : ['ultramilkxstraykids']\n","#   \"indomilk\"    : [\"indomilkyourway\", \"ngertikanrasanya\"],\n","#   \"milklife\"    : [\"beranieksplorasi\", \"beraniminumsusu\", \"themilkoflife\"],\n","#   \"sosro\"       : [\"apapunjajanannya\", \"apapunmakanannya\", \"apapunmomennya\", \"minumnyatehbotolsosro\", \"momenasli\"],\n","#   \"teh_pucuk\"   : [\"generasihaustantangan\", \"momenpucuk\", \"pucukgeneration\", \"segerindimanaaja\", \"tehpucukharum\"]\n","# }"],"metadata":{"id":"hEO1JWAQhRRG","executionInfo":{"status":"ok","timestamp":1708566850124,"user_tz":-420,"elapsed":12,"user":{"displayName":"Synithis","userId":"03957030646426939799"}}},"execution_count":4,"outputs":[]},{"cell_type":"code","execution_count":9,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"ltEyM-PH-niu","executionInfo":{"status":"ok","timestamp":1708570274481,"user_tz":-420,"elapsed":3022,"user":{"displayName":"Synithis","userId":"03957030646426939799"}},"outputId":"8b4b2b55-c984-4743-f3c1-445dbd11b44e"},"outputs":[{"output_type":"stream","name":"stdout","text":["ultramilk - ultramilkxstraykids\n"]},{"output_type":"stream","name":"stderr","text":["WARNING:root:Empty page on https://nitter.tux.pizza/search?f=tweets&q=%23ultramilkxstraykids\n"]},{"output_type":"stream","name":"stdout","text":["{'tweets': [], 'threads': []}\n","File Already Existed\n"]}],"source":["for brand in brands :\n","  for hashtag in hashtags[brand]:\n","    brand = brand.lower()\n","    hashtag = hashtag.lower()\n","    print(brand+' - '+hashtag)\n","    scraped_tweet = ''\n","    scraped_tweet = scraper.get_tweets(hashtag, mode='hashtag', instance='https://nitter.tux.pizza/search?f=tweets&q=%23ultramilkxstraykids')\n","    print(scraped_tweet)\n","    if scraped_tweet != None :\n","      tweet_data = scraped_tweet['tweets']\n","      df = json_normalize(tweet_data)\n","      df.drop_duplicates(subset='text', keep=\"last\", inplace=True)\n","      if path.exists(root_file+'/data_scraped/twitter/'+brand+'/') == False:\n","        os.makedirs(root_file+'/data_scraped/twitter/'+brand+'/')\n","      else :\n","        print(\"File Already Existed\")\n","      name_file = 'data_scraped/twitter/'+brand+'/'+hashtag+'_feb.csv'\n","      df.to_csv(name_file, encoding='utf-8', index=False)"]}],"metadata":{"colab":{"provenance":[],"authorship_tag":"ABX9TyNjPpw51CXbARxZESrUi7j0"},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}